CREATE DATABASE `amms_squid`;
USE `amms_squid`;

CREATE TABLE `lim` (
  `type` varchar(1) NOT NULL default '',
  `ident` varchar(24) NOT NULL default '',
  `parent` varchar(24) default NULL,
  `value` varchar(12) default NULL,
  `period` varchar(4) default NULL,
  `stat` tinyint(3) unsigned default NULL,
  `ts` timestamp NOT NULL default '0000-00-00 00:00:00',
  `desc` varchar(64) character set utf8 default NULL,
  PRIMARY KEY  (`type`,`ident`)
) TYPE=MyISAM;

CREATE TABLE `tlog` (
  `ts` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `ip` int(10) unsigned default NULL,
  `rcode` varchar(32) default NULL,
  `size` int(10) unsigned default NULL,
  `method` varchar(8) default NULL,
  `url` varchar(128) default NULL,
  `ident` varchar(24) default NULL,
  `mime` varchar(64) default NULL,
  `hit` tinyint(1) default '0'
) TYPE=MyISAM;

CREATE TABLE `tval` (
  `ident` varchar(24) NOT NULL default '',
  `size` int(10) unsigned default NULL,
  `size_hit` int(10) unsigned default NULL,
  `ts` timestamp NOT NULL default '0000-00-00 00:00:00',
   INDEX (`ident`)
) TYPE=MyISAM;

CREATE TABLE `traf` (
  `ident` varchar(24) NOT NULL default '',
  `size` int(10) unsigned default NULL,
  `size_hit` int(10) unsigned default NULL,
  PRIMARY KEY  (`ident`)
) TYPE=MyISAM;

CREATE TABLE `ignor` (
  `address` varchar(128) NOT NULL default '',
  PRIMARY KEY  (`address`)
) TYPE=MyISAM;

CREATE TABLE `lock` (
  `v1` varchar(255) NOT NULL default '',
  `v2` varchar(255) NOT NULL default ''
) TYPE=MyISAM;

GRANT ALL PRIVILEGES ON amms_squid.* TO amms@localhost IDENTIFIED BY "amms";

