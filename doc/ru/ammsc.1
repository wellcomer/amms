.\"Created with GNOME Manpages Editor Wizard
.\"http://sourceforge.net/projects/gmanedit2
.TH ammsc 1 "October 25, 2011" "0.9" "An account management system for SQUID"

.SH НАЗВАНИЕ
ammsc \- консольный клиент amms

.SH СИНТАКСИС
.B ammsc
.RI команда
аргументы
.br

.SH ОПИСАНИЕ
AMMS клиент реализует GET запросы по протоколу HTTP, обеспечивает синтаксис управления лимитами и расширениями ammsd.
Распределение запросов, аутентификацию и прочие дополнительные возможности реализует высокопроизводительный http сервер.
Допускается сокращенное написание команды и аргументов, если они не конфликтуют с другими.
Командой является имя расширения или встроенные в ammsc команды.

.SH ВСТРОЕННЫЕ КОМАНДЫ
.B limit
[ident] [V|no|state|desc|parent|rename|over] [P|no] [t|i|p]
.RS

ident - идентификатор пользователя, V - объем трафика (Б,КБ,МБ,ГБ), P - период (s/m/h/d - сек/мин/час/день)

Установить лимит пользователя user1, 100M на 24 часа с начала суток (таймер abs), с времени задания лимита (таймер rel)

	ammsc li user1 100M 1d

Если тип лимита не указан, подразумевается ident.

Удалить лимит:

	ammsc li user1 no

Задать описание:

	ammsc li user1 desc SuperUser

Удалить описание:

	ammsc li user1 desc no

Изменить статус (включен, выключен, заблокирован):

	ammsc li user1 s on|off|dis

Назначить родительский лимит (наследование недостающих параметров):

	ammsc li user1 parent users

Переименовать user1 в user2:

	ammsc li user1 ren user2

Задать неограниченный лимит на опр. период:

	ammsc li user1 over 3d

Удалить неограниченный лимит вручную:

	ammsc li user1 over no
.RE

.B reset
ident
.RS
Сброс трафика
.RE

.SH РАСШИРЕНИЯ
.B ext
.RS
Список расширений
.RE

.B history
ident [time] [count]

.RS
 История (журнал) посещаемых сайтов
 ident - идентификатор пользователя
 time - время, если не указано посл. 25 записей
 count - количество выводимых записей

 Формат времени (time): YYYY-MM, YYYY-MM-DD
.RE

.B ignore
[ls|rem|add] [num|rec]

.RS
 Игнорируемые для подсчета адреса
 ls - просмотр
 rem num - удалить запись c порядковым номером num
 add rec - добавить запись rec (символьное имя напр. ya.ru, 
 адрес сети напр. 192.168.0.0/16 или хоста)
.RE


.B import
filename

.RS
 Импорт лимитов в БД
 filename - имя файла для импорта
 Для экспорта используйте: ammsc li > filename
.RE

.B lock
[ls|set ident ip|rem num|get ident|check ident ip]

.RS
 Привязка логина к IP адресу
 ls - просмотр таблицы
 set - установка привязки ident к ip
 rem num - удалить запись с номером num
 get ident - получить записи для ident
 check ident ip - проверить доступ по ident и ip
.RE

.B stat
ident

.RS
 Объем использованного трафика за период действия лимита
 ident - идентификатор пользователя, если не указан выводится
 статистика по всем пользователям
.RE

.B traf
ident time [detail]

.RS
 Объем трафика пользователя за временной период
 ident - идентификатор пользователя ( . - статистика по всем пользователям )
 time - время
 detail - детализация
.RE

.SH "СМОТРИТЕ ТАКЖЕ"

